<app-login *ngIf="!isLoggedIn" (childEvent)="onChildEvent($event)"></app-login>
<div class="app-container" *ngIf="isLoggedIn" [class.is-mobile]="mobileQuery.matches">
  <mat-toolbar>
    <button mat-icon-button (click)="sidenav.toggle()"><mat-icon class="menu">menu</mat-icon></button>
    <a> Welcome {{displayUser}} </a>
    <span class="spacer"></span>
    <button mat-icon-button [matMenuTriggerFor]="beforeMenu"><mat-icon>account_circle</mat-icon></button>
    <mat-menu #beforeMenu="matMenu" xPosition="before">
      <button mat-menu-item>
        <div class="d-flex">
          <mat-icon>account_circle</mat-icon>
          <div class="flex-grow-1"> <span class="fw-semibold d-block lh-1">{{displayUser}}</span></div>
        </div>
      </button>
      <button mat-menu-item>
        <a class="dropdown-item" (click)="logout()" style="cursor:pointer"> <i class="bx bx-power-off me-2"></i> <span class="align-middle">Log Out</span> </a> 
      </button>
    </mat-menu>
  </mat-toolbar>
  <mat-sidenav-container class="app-container">
    <mat-sidenav 
      #sidenav mode="side" 
      opened 
      [fixedInViewport]="options.value.fixed" 
      [fixedTopGap]="options.value.top"
      [fixedBottomGap]="options.value.bottom">
      <mat-nav-list>
        <a mat-list-item routerLink="{{nav.path}}" *ngFor="let nav of navItems">{{nav.name}}</a>
      </mat-nav-list>
    </mat-sidenav>

    <mat-sidenav-content [formGroup]="options">
      <router-outlet></router-outlet>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>

